function Dialog(s,i){this.title=s.title,this.ticket=s.ticket,this.content=s.content,this.btntext=s.btntext,this.awardlink=s.awardlink,this.isclick=!0,this.ele=i.ele,this.clicked=!1,this.callback=i.callback,this.type=s.type||"none",this.s=s.s,this.st=null,this.ct=null,this.ut=null,this.item=s.item,this.dialog_init()}Dialog.prototype={constructor:Dialog,dialog_init:function(){"none"==this.type?this.dialogNone():"over"==this.type?this.dialogOver():this.dialog(),this.dialog_close()},dialog_close:function(){$(".modal-body").on("mousedown",function(){this.ct=(new Date).getTime()}.bind(this)),$(".modal-body").on("mouseup",function(){this.ut=(new Date).getTime()}.bind(this)),$(document).off("click",".modal-body").on("click",".modal-body",function(){if($(".modal-body").hasClass("stayHere"))return $(".closetc").trigger("click"),!1;$(".goto").html("\u9875\u9762\u6b63\u5728\u52a0\u8f7d~"),this.isclick&&(this.isclick=!1,window.setTimeout(function(){baseJs.adclick(this.item,this.ct,this.ut),window.open(this.item.curl,"mediav"+(new Date).getTime()),setTimeout(function(){$(".closetc").trigger("click")},100)}.bind(this),10))}.bind(this)),$(document).off("click.ele").on("click.ele",this.ele,function(s){if(this.ele&&(s.stopPropagation(),this.callback&&"function"==typeof this.callback)){this.callback();var i=$(".showPrize-dialog").offset(),a=i.left+i.width/2+"px",t=i.top+i.height/2+"px";$(document).find(".showPrize-dialog,.card-sunshine").animate({transform:"translate3d("+a+",-"+t+",0) scale(0.1)","-webkit-transform":"translate3d("+a+",-"+t+",0) scale(0.1)"},300,"linear",function(){$(".popShowPrize").remove()})}}.bind(this)),$(document).on("click",".getAward,.quitAward",function(s){if(!this.clicked){this.clicked=!0,s.stopPropagation();var i,a,t,n;switch(a=$("input[name=username]").val(),t=$("input[name=tel]").val(),n=$("input[name=adress]").val(),s.target.className){case"getAward":if(i=0,""==a||""==t||""==n)return this.clicked=!1,void this.myAlert("\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f\u54e6",1e3);if(!/^1[3|4|5|8][0-9]\d{4,8}$/.test(t))return this.myAlert("\u8bf7\u586b\u5199\u6709\u6548\u53f7\u7801",1e3),void(this.clicked=!1);break;case"quitAward":i=2}var e=this.urlHead+"/award/clickPrizes",o={orderNum:this.ordernum,userName:a,phone:t,userAddress:n,state:i};baseJs._ajax(e,o,"GET",!0,function(s){this.callback&&"function"==typeof this.callback&&this.callback(),this.clicked=!1,$("#getaward").remove()})}}.bind(this))},myAlert:function(s,i){if(!document.getElementById("alertBg")){var a=i||1e3,t=document.createElement("div");t.setAttribute("id","alertBg");var n=document.createElement("p");n.setAttribute("class","text");var e=document.createTextNode(s);n.appendChild(e),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},a)}},dialog:function(){var s='<div class="popShowPrize" id="dialog5"><div class="card-sunshine"></div><div class="m-box"></div><div class="showPrize-dialog modal-body stayHere"><div class="card-bg" style="background-image: url(img/cardbg_turntable.png)"><img src="'+this.ticket+'"></div><div class="red-bg"></div><div class="detail"><div class="ownPrize">\u606d\u559c\u4f60\u83b7\u5f97\u4e86 </div><div class="topic">'+this.title+'</div><div class="goto">'+this.btntext+'</div></div></div><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="close-btn closetc iconfont"></span></div>';$("body").append(s),$("#dialog5").show(),this.st=(new Date).getTime(),baseJs.adShowPV(this.item)},dialogNone:function(){$("body").append('<div class="popShowPrize" id="dialog5"><div class="card-sunshine"></div><div class="m-box"></div><div class="showPrize-dialog modal-body stayHere"><div class="card-bg" style="background-image: url(img/cardbg_turntable.png)"><img src="img/no-prize.png"alt=""></div><div class="red-bg"></div><div class="detail"><div class="topic">\u5f88\u9057\u61be! \u798f\u888b\u91cc\u4ec0\u4e48\u90fd\u6ca1\u6709~ </div><div class="goto">\u5173\u95ed</div></div><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span></div><span class="close-btn closetc"></span></div>'),$("#dialog5").show()},dialogOver:function(){$("body").append('<div class="popShowPrize" id="dialog5"><div class="card-sunshine"></div><div class="m-box"></div><div class="showPrize-dialog modal-body stayHere"><div class="card-bg" style="background-image: url(img/cardbg_turntable.png)"><img src="img/no-prize.png"alt=""></div><div class="red-bg"></div><div class="detail"><div class="topic">\u60a8\u4eca\u5929\u7684\u62bd\u5956\u6b21\u6570\u5df2\u7528\u5b8c~ </div><div class="goto">\u5173\u95ed</div></div><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span><span class="ribbon"></span></div><span class="close-btn closetc"></span></div>'),$("#dialog5").show()},dialog_getAward:function(){var s='<div id="getaward"><div class="getcontent"><div class="contents"><div class="awardname">'+this.title+'</div><div class="tip">\u8bf7\u586b\u5199\u771f\u5b9e\u8054\u7cfb\u65b9\u5f0f(\u4e0d\u53ef\u4fee\u6539),\u5de5\u4f5c\u4eba\u5458\u5c06\u57285-10\u4e2a\u5de5\u4f5c\u65e5\u8054\u7cfb\u60a8\u5151\u5956</div><div class="form"><input type="text" name="username" placeholder="\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d" /><input type="text" name="tel" placeholder="\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801" /><input type="text" name="adress" placeholder="\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740" /><div class="buttongroup"><button class="getAward" type="submit">\u63d0\u4ea4</button><button class="quitAward" type="quit">\u653e\u5f03\u9886\u5956</button></div></div></div></div></div>';$("body").append(s)}};